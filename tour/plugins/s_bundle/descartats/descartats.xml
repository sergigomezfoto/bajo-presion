<krpano>


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//S_PAINTUI

<!-- SOBRECARREGA TOT I VA TOT MOLT LENT -->

<events name="s_paintui" keep="true" onmousedown="s_blockall(true);s_paintui(brush1);" onmouseup="s_blockall(false);set(s_paintui,false)"/>

<action name="s_paintui" scope="local" args="brushstyle" >

addlayer(s_paintui_follow,brush);
brush.loadstyle(calc(brushstyle));
set(global.s_paintui,true);
if (!global.s_paintuiid,
	def(global.s_paintuiid,number,0);
);
setinterval(s_paintui,
, 
	if (s_paintui,
	inc(global.s_paintuiid);	
	copy(layer[s_paintui_follow].y, mouse.y);
	copy(layer[s_paintui_follow].x, mouse.x);
	addlayer(calc('s_paintui_stroke' + global.s_paintuiid));
	layer[calc('s_paintui_stroke' + global.s_paintuiid)].loadstyle(calc(brushstyle));	
	copy(layer[calc('s_paintui_stroke' + global.s_paintuiid)].x,mouse.x);
	copy(layer[calc('s_paintui_stroke' + global.s_paintuiid)].y,mouse.y);
	);		

//interval killer
	if (!global.s_paintui, clearinterval(s_paintui);trace(global.s_paintuiid));	
);
</action>


<style name="brush1"
keep="true"
type="text"
width="5"
height="5"
bg="true"
bgalpha="1"
alpha="1"
x="0"
y="0"
enabled="false"
bgcolor="0xff6674"
edge="center" 

/>
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

</krpano>
