
<krpano>

 <tesths
 bg="false"
 /> 

 
 <style name="speech_bubbles"
    type="text"
    bg="true"
    bgalpha="1"
    bgcolor="0xffffff"
    bgshadow="4 4 9 0x000000 0.2"
    width="20"
    height="20"   
    distorted="true"
    zoom="true"
    capture="true"
    renderer="css3d"
    handcursor="true"
    align="bottomleft"
    alpha="0"
      onclcik=""
    onloaded="configurebubblehs"
 />





      <style name="hstotalwrapper"
         type="text"
         bg="true"
         bgcolor="0xffffff"
         bgalpha="1"

         enabled="false"
         flowchildren="h"
         childflowspacing="10"  
         childmargin="20"
         align="bottomleft"
         loadedchilds="0"
         
      />

            <style name="hsimage"
               scale="0.25"
               gridfit="true"
               align="topleft"

            />
            

            
            

            <style name="hsuserinfocontentwrapper"
            type="text"
               bg="get:tesths.bg"
               bgcolor="0xff4567"
               bgalpha="1"
               flowchildren="v"
               childflowspacing="10"  
            />


                     <style name="hsuserdatewrapper"
                        type="text"
                        bg="get:tesths.bg"
                        bgcolor="0x5487ff"
                        bgalpha="1"
                        width="100%"
                        flowchildren="h"
                        childflowspacing="10"
                     />

                              <style name="hsuser"
                                 type="text"
                                 autowidth="true"
                                 autoheight="true"
                                 bg="get:tesths.bg"
                                 bgcolor="0x635498"
                                 text="Palindromo"
                                 css="color:balck;font-family:'untitled_sansbold'; font-size: 14px; "
                                 align="topleft"
                                 renderer="webgl"

                              />
                              
                        
                              <style name="hsdate"
                                 type="text"
                                 autowidth="true"
                                 autoheight="true"
                                 bg="get:tesths.bg"
                                 bgcolor="0x63ff987"
                                 text="1w"
                                 css="color:#aaaaaa;font-family: 'untitled_sansregular'; font-size: 14px; "
                                 align="topleft"
                                 renderer="webgl"

                              />
                              
                              <style name="hsheart"
                              url="%FIRSTXML%/../assets/img/users/heart.png"
                              crop="0|0|56|56"
                              align="right"
                              scale="0.25"
                              width="56"
                              flow="false"

                              />
                              



                     <style name="hscontent"
                        type="text"
                        width="150"
                        autoheight="true"
                        bg="get:tesths.bg"
                        bgcolor="0x978665"
                        text=""
                        css="color:black;font-family: 'untitled_sansregular'; font-size: 14px; "
                        align="topleft"
                        renderer="webgl"


                        
                     />

    <style name="bubble_indicator"
    type="text"
    bg="true"
    bgalpha="1"
    bgcolor="0xffffff"
    width="20"
    height="20"   
    alpha="1"
    flow="false"
    edge="center"
    rotate="45"
    align="bottom"
    y="-15" 
    zorder="0"
 />

 <style name="indicator_bottom"
    align="bottom"
    y="-15" 
 />
 <style name="indicator_bottomleft"
    align="bottomleft"
    y="-15" 
    x="10"

 />
 <style name="indicator_bottomright"
    align="bottomright"
    y="-15" 
    x="10"

 />
 <style name="indicator_left"
    align="left" 
    x="-15"
    y="0"
 />
 <style name="indicator_leftbottom"
    align="bottomleft" 
    x="-15"
    y="10"
 />
 <style name="indicator_right"
    align="right" 
    x="-15"
    y="0"
 />
 <style name="indicator_rightbottom"
    align="bottomright" 
    x="-15"
    y="10"
 />
 <style name="indicator_null"
    alpha="0"
 />
 


<action name="configurebubblehs" scope="local">
   <!-- trace('configurebubblehs:' ,caller.name);     -->         
   ///////////////////////////hstotalwrapper
   addlayer((caller.name + 'wrapper'),wrapper); 
   wrapper.parent=('hotspot[' + caller.name + ']'); 
   wrapper.loadstyle('hstotalwrapper'); 
   ///////////////////////////hsimage
   
   if (caller.s_photo == 'null',
      inc(('layer[' + wrapper.name + '].loadedchilds'));
   ,
      addlayer((caller.name + 'image'),image);
      image.parent=(caller.name + 'wrapper');
      image.loadstyle('hsimage');
      image.url=('%FIRSTXML%/../assets/img/users/' + caller.s_photo + '.jpg');
      image.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');
   );
   ///////////////////////////hsuserinfocontentwrapper
   addlayer((caller.name + 'infocontentwrapper'),infocontentwrapper); 
   infocontentwrapper.parent=(caller.name + 'wrapper');
   infocontentwrapper.loadstyle('hsuserinfocontentwrapper');
   infocontentwrapper.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');

   ///////////////////////////hsuserdatewrapper
   addlayer((caller.name + 'userdatewrapper'),userdatewrapper);
   userdatewrapper.parent=(caller.name + 'infocontentwrapper');
   userdatewrapper.loadstyle('hsuserdatewrapper');
   userdatewrapper.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');
   ///////////////////////////hsuser
   addlayer((caller.name + 'user'),user);
   user.parent=(caller.name + 'userdatewrapper');
   user.loadstyle('hsuser');
   user.text=caller.s_user;
   user.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');
   ///////////////////////////hsdate
   if (caller.s_date == 'null',
      inc(('layer[' + wrapper.name + '].loadedchilds'));
   ,
      addlayer((caller.name + 'date'),date);
      date.parent=(caller.name + 'userdatewrapper');
      date.loadstyle('hsdate');
      date.text=caller.s_date;
      date.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');
   );
   ///////////////////////////hsheart
   if (caller.s_heart == 'null',
      inc(('layer[' + wrapper.name + '].loadedchilds'));
   ,
      addlayer((caller.name + 'heart'),heart);
      heart.parent=(caller.name + 'userdatewrapper');
      heart.loadstyle('hsheart');
      heart.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');
   );
   ///////////////////////////hscontent
     

      addlayer((caller.name + 'content'),content);
      content.parent=(caller.name + 'infocontentwrapper');
      content.loadstyle('hscontent');
      content.text=caller.s_content;
      content.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');

      if (caller.s_content == 'null',
         content.height=0;
         content.autowidth=true;
         user.oy=5;
            if (caller.s_heart == 'null',
               user.align='top';
            );
         );
      
   ///////////////////////////hsindicator
   addlayer((caller.name + 'indicator'),indicator);
   indicator.parent=(caller.name + 'wrapper');
   if (caller.s_position == 'bottom',
      indicator.loadstyle('bubble_indicator|indicator_bottom');
      ,caller.s_position == 'bottomleft',
      indicator.loadstyle('bubble_indicator|indicator_bottomleft');
      ,caller.s_position == 'bottomright',
      indicator.loadstyle('bubble_indicator|indicator_bottomright');
      ,caller.s_position == 'left',
      indicator.loadstyle('bubble_indicator|indicator_left');
      ,caller.s_position == 'right',
      indicator.loadstyle('bubble_indicator|indicator_right');
      ,caller.s_position == 'leftbottom',
      indicator.loadstyle('bubble_indicator|indicator_leftbottom');
      ,caller.s_position == 'rightbottom',
      indicator.loadstyle('bubble_indicator|indicator_rightbottom');
      ,caller.s_position == 'null',
      indicator.loadstyle('bubble_indicator|indicator_null');
     
   );

   indicator.onloaded=('inc(layer[' + wrapper.name + '].loadedchilds);');

   caller.onclick=('if(layer[' + heart.name + '].crop !="56|0|56|56" ,jscall("Game.incPanoPoints()"););layer[' + heart.name + '].crop="56|0|56|56";jscall("Game.checkPanoPointsGoal(showNextPano)");');
  
   if (caller.s_heart == 'null',
      caller.enabled=false;
   );

   asyncloop(layer[(wrapper.name)].loadedchilds LT 8,,
      trace(layer[(wrapper.name)].loadedchilds);
      caller.width=layer[(caller.name + 'wrapper')].pixelwidth;
      caller.height=layer[(caller.name + 'wrapper')].pixelheight;
      tween(caller.alpha,1,0.2);
   );

</action>


 		 <!-- 
       <hotspot name="htest" ath="0" atv="0" style="speech_bubbles"/>
       <layer name="test2wrapper" style="hstotalwrapper" >
				<layer name="test2" style="hsimage" />			
				<layer name="test98"  style="hsuserinfocontentwrapper">				
					<layer name="test23"  style="hsuserdatewrapper">			
						<layer name="test3" style="hsuser" />
						<layer name="test4" style="hsdate" />		
						<layer name="test8796876" style="hsheart"/>
					</layer>
					<layer name="test54"  style="hscontent"/>
				</layer>			
				<layer name="hsindicator" keep="true" style="bubble_indicator"/>
			</layer>  -->
  
  
</krpano>

